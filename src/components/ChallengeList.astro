---
import SectionTitle from "@components/SectionTitle.astro";
import { t } from "@locales";
import type { CollectionEntry } from "astro:content";

interface Props {
  challenges: Array<{
    challenge: CollectionEntry<"challenges">;
    count: number;
  }>;
  title: string;
  lang: string;
  showCount?: boolean;
}

const { challenges, title, lang, showCount = true } = Astro.props;

// Filter challenges with at least one item
const challengesWithContent = challenges.filter(({ count }) => count > 0);

// Get base path for challenge URLs using localized routes
const challengeBasePath = t(lang, "routes.challenges");
---

<main class="types">
  <SectionTitle title={title} />
  <ul class="types__list">
    {
      challengesWithContent.map(({ challenge, count }) => (
        <li class="types__list__item">
          <a href={`/${lang}/${challengeBasePath}/${challenge.data.challenge_slug}`}>{challenge.data.name}</a>
          {showCount && <span class="types__list__item__number">({count})</span>}
        </li>
      ))
    }
  </ul>
</main>
