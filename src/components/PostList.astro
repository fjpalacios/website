---
import PostTitle from "@components/PostTitle.astro";

import type { PostSummary, TutorialSummary, BookSummary } from "@/utils/blog";

// Generic item type that works for posts, tutorials, and books
type ListItem = PostSummary | TutorialSummary | BookSummary;

interface Props {
  posts: ListItem[];
}

const { posts } = Astro.props;

// Default cover image fallback
const defaultCover = "/images/defaults/post-default.jpg";
---

<main class="blog">
  <section class="blog__grid">
    {
      posts.map((post) => (
        <a href={`/blog/${post.slug}`}>
          <section class="blog__grid__post">
            <img src={post.cover || defaultCover} alt={post.title} width="800" height="400" loading="lazy" />
            <PostTitle title={post.title} date={post.date} />
            <div class="text-area">
              <p>{post.excerpt}</p>
            </div>
          </section>
        </a>
      ))
    }
  </section>
</main>
