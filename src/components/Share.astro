---
import Title from "@components/Title.astro";

import { getDefaultLanguageCode, type LanguageKey } from "@/config/languages";
import shareEn from "@/content/static/share/en";
import shareEs from "@/content/static/share/es";

import { t } from "../locales";

interface Props {
  title: string;
  url: string;
  lang: LanguageKey;
  twitterUsername: string;
}

const { title, url, lang, twitterUsername } = Astro.props;

// Get share content based on language using centralized map
const shareContentMap: Record<LanguageKey, string> = {
  es: shareEs,
  en: shareEn,
};
const shareContent = shareContentMap[lang] ?? shareContentMap[getDefaultLanguageCode()];

// Replace placeholders
const message = shareContent
  .replace(/%TITLE%/g, title)
  .replace(/%URL%/g, url)
  .replace(/%TWITTER%/g, twitterUsername.replace("@", ""));
---

<section class="share">
  <Title title={t(lang, "share.title")} />
  <div class="text-area" set:html={message} />
</section>
