---
import SectionTitle from "@components/SectionTitle.astro";
import { t } from "@locales";

interface TaxonomyItemData {
  name: string;
  [key: string]: unknown;
}

interface TaxonomyItem {
  data: TaxonomyItemData;
}

interface Props {
  items: Array<{
    item: TaxonomyItem;
    count: number;
  }>;
  title: string;
  lang: string;
  routeKey: string;
  slugField: string;
  showCount?: boolean;
}

const { items, title, lang, routeKey, slugField, showCount = true } = Astro.props;

const itemsWithContent = items.filter(({ count }) => count > 0);
const basePath = t(lang, `routes.${routeKey}`);
---

<main class="types">
  <SectionTitle title={title} />
  <ul class="types__list">
    {
      itemsWithContent.map(({ item, count }) => {
        const slug = item.data[slugField];
        return (
          <li class="types__list__item">
            <a href={`/${lang}/${basePath}/${slug}`}>{item.data.name}</a>
            {showCount && <span class="types__list__item__number">({count})</span>}
          </li>
        );
      })
    }
  </ul>
</main>
