---
import { bookInlineImages } from "@utils/imageImports";
import { Image } from "astro:assets";

interface Props {
  src: string;
  alt: string;
}

const { src, alt } = Astro.props;

// Extract filename from src (remove path and extension)
const filename =
  src
    .split("/")
    .pop()
    ?.replace(/\.(jpg|jpeg|png|webp|avif)$/i, "") || "";

// Get optimized image from imports
const image = bookInlineImages[filename];

if (!image) {
  console.warn(`⚠️  Inline image not found: ${filename}`);
}
---

{
  image ? (
    <Image src={image} alt={alt} class="book-inline-image" loading="lazy" decoding="async" />
  ) : (
    <img src={src} alt={alt} class="book-inline-image" />
  )
}
