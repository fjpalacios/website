---
import { SKILL_COLORS } from "@constants/colors";
import { darken } from "@utils/colors";

interface Props {
  text: string;
  width: number;
  color?: string;
}

const { text, width, color = SKILL_COLORS.SUCCESS } = Astro.props;
const darkColor = darken(color, 25);
const clampedWidth = Math.min(100, Math.max(0, width));
const displayPercentage = clampedWidth.toFixed(1);
---

<div
  class="skill-bar"
  style={`--skill-color: ${color}; --skill-dark-color: ${darkColor}; --skill-width: ${clampedWidth}%`}
>
  <div class="skill-bar__text">
    {text}
  </div>
  <div class="skill-bar__box">
    <div class="skill-bar__box__level"></div>
    <div class="skill-bar__box__percent">{displayPercentage}%</div>
  </div>
</div>
