---
import TextArea from "@components/TextArea.astro";
import Title from "@components/Title.astro";
import Layout from "@layouts/Layout.astro";
import { t } from "@locales/index";
import { getContact } from "@utils/content/contact";

const lang = "es";
const contact = getContact(lang);
const pageTitle = t(lang, "feeds.title");
const pageDescription = t(lang, "feeds.description");

const feeds = [
  {
    title: t(lang, "feeds.general"),
    description: t(lang, "feeds.generalDescription"),
    url: "/es/rss.xml",
    icon: "ðŸ“°",
  },
  {
    title: t(lang, "feeds.books"),
    description: t(lang, "feeds.booksDescription"),
    url: "/es/libros/rss.xml",
    icon: "ðŸ“š",
  },
  {
    title: t(lang, "feeds.tutorials"),
    description: t(lang, "feeds.tutorialsDescription"),
    url: "/es/tutoriales/rss.xml",
    icon: "ðŸ’»",
  },
];

// Build HTML content for each feed
const feedsContent = feeds
  .map(
    (feed) => `
  <div class="feed-item">
    <div class="feed-item__header">
      <span class="feed-item__icon">${feed.icon}</span>
      <h3 class="feed-item__title">${feed.title}</h3>
    </div>
    <p class="feed-item__description">${feed.description}</p>
    <a href="${feed.url}" class="feed-item__link" type="application/rss+xml" aria-label="${t(lang, "feeds.subscribeButton")} - ${feed.title}">
      <svg class="feed-item__icon-rss" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
      </svg>
      ${t(lang, "feeds.subscribeButton")}
    </a>
  </div>
`,
  )
  .join("");

const rssInfoContent = `<p>${t(lang, "feeds.whatIsRssDescription")}</p>`;
---

<Layout title={pageTitle} description={pageDescription} lang={lang} contact={contact}>
  <main class="feeds-page">
    <section class="feeds-page__section">
      <Title title={pageTitle} />
      <TextArea text={`<p>${pageDescription}</p>${feedsContent}`} />
    </section>

    <section class="feeds-page__section">
      <Title title={t(lang, "feeds.whatIsRss")} />
      <TextArea text={rssInfoContent} />
    </section>
  </main>
</Layout>

<style lang="scss">
  @use "@/styles/pages/feeds";
</style>
