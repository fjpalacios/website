---
/**
 * Books List Page Template
 * Reusable template for books list (page 1)
 * Used by unified routing system
 */

import Paginator from "@components/Paginator.astro";
import PostList from "@components/PostList.astro";
import Title from "@components/Title.astro";
import Layout from "@layouts/Layout.astro";
import { t } from "@locales";
import type { ContactItem } from "@types/content";

import type { BookSummary } from "@/utils/blog";
import { buildBooksIndexUrl } from "@/utils/routes";

interface Props {
  lang: string;
  books: BookSummary[];
  currentPage: number;
  totalPages: number;
  itemListSchema: Record<string, unknown>;
  contact: ContactItem[];
  hasTargetContent: boolean;
}

const { lang, books, currentPage, totalPages, itemListSchema, contact, hasTargetContent } = Astro.props;

const pageTitle = t(lang, "pages.books");
const pageDescription = lang === "en" ? "Book reviews" : "Rese√±as de libros";
const basePath = buildBooksIndexUrl(lang);
---

<Layout
  lang={lang}
  title={pageTitle}
  description={pageDescription}
  contact={contact}
  hasTargetContent={hasTargetContent}
  currentPage={currentPage}
  totalPages={totalPages}
  basePath={basePath}
>
  <Title title={pageTitle} icon="book" />

  <div data-pagefind-ignore>
    <script type="application/ld+json" set:html={JSON.stringify(itemListSchema)} />

    {
      books.length > 0 ? (
        <PostList posts={books} lang={lang} showOrderBadges={true} />
      ) : (
        <div class="empty-state">
          <p>{t(lang, "emptyState.books")}</p>
        </div>
      )
    }
  </div>

  <Paginator currentPage={currentPage} totalPages={totalPages} basePath={basePath} lang={lang} />
</Layout>

<style lang="scss">
  @use "@/styles/mixins" as *;
  @use "@/styles/variables" as *;

  .empty-state {
    grid-column: span 12;
    text-align: center;
    padding: 4rem 2rem;
    color: $cursive-color;
  }
</style>
