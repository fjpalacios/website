---
import Paginator from "@components/Paginator.astro";
import PostList from "@components/PostList.astro";
import Title from "@components/Title.astro";
import Layout from "@layouts/Layout.astro";
import { t } from "@locales";

import contactEn from "@/content/static/contact/en.json";
import { generateBooksPaginationPaths } from "@/utils/booksPages";

export async function getStaticPaths() {
  const paths = await generateBooksPaginationPaths("en", contactEn);
  return paths.map(({ page, props }) => ({
    params: { page },
    props,
  }));
}

const { lang, books, currentPage, totalPages, contact } = Astro.props;
const pageTitle = "ðŸ“š " + t(lang, "pages.books");
const pageDescription = "Book reviews";
---

<Layout lang={lang} title={pageTitle} description={pageDescription} contact={contact}>
  <Title title={pageTitle} />

  <div data-pagefind-ignore>
    {
      books.length > 0 ? (
        <PostList posts={books} lang={lang} />
      ) : (
        <div class="empty-state">
          <p>{t(lang, "emptyState.books")}</p>
        </div>
      )
    }
  </div>

  <Paginator currentPage={currentPage} totalPages={totalPages} basePath="/en/books" lang={lang} />
</Layout>

<style lang="scss">
  @use "@/styles/mixins" as *;
  @use "@/styles/variables" as *;

  .empty-state {
    grid-column: span 12;
    text-align: center;
    padding: 4rem 2rem;
    color: $cursive-color;
  }
</style>
