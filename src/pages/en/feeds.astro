---
import Title from "@components/Title.astro";
import { contact } from "@content/en/contact";
import Layout from "@layouts/Layout.astro";
import { t } from "@locales/index";

const lang = "en";
const pageTitle = t(lang, "feeds.title");
const pageDescription = t(lang, "feeds.description");

const feeds = [
  {
    title: t(lang, "feeds.general"),
    description: t(lang, "feeds.generalDescription"),
    url: "/rss.xml",
    icon: "ðŸ“°",
  },
  {
    title: t(lang, "feeds.books"),
    description: t(lang, "feeds.booksDescription"),
    url: "/en/books/rss.xml",
    icon: "ðŸ“š",
  },
  {
    title: t(lang, "feeds.tutorials"),
    description: t(lang, "feeds.tutorialsDescription"),
    url: "/en/tutorials/rss.xml",
    icon: "ðŸ’»",
  },
];
---

<Layout title={pageTitle} description={pageDescription} lang={lang} contact={contact} translationSlug="/es/feeds">
  <Title title={pageTitle} />

  <div class="feeds-page">
    <div class="feeds-page__intro">
      <p>{pageDescription}</p>
    </div>

    <div class="feeds-page__list">
      {
        feeds.map((feed) => (
          <article class="feed-item">
            <div class="feed-item__header">
              <span class="feed-item__icon" aria-hidden="true">
                {feed.icon}
              </span>
              <h3 class="feed-item__title">{feed.title}</h3>
            </div>
            <p class="feed-item__description">{feed.description}</p>
            <a
              href={feed.url}
              class="feed-item__link"
              type="application/rss+xml"
              aria-label={`${t(lang, "feeds.subscribeButton")} - ${feed.title}`}
            >
              <svg
                class="feed-item__icon-rss"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
              </svg>
              {t(lang, "feeds.subscribeButton")}
            </a>
          </article>
        ))
      }
    </div>

    <div class="feeds-page__info">
      <h3 class="feeds-page__info-title">{t(lang, "feeds.whatIsRss")}</h3>
      <p class="feeds-page__info-content">{t(lang, "feeds.whatIsRssDescription")}</p>
    </div>
  </div>
</Layout>

<style lang="scss">
  @use "@/styles/mixins" as *;
  @use "@/styles/variables" as *;

  .feeds-page {
    grid-column: span 12;
    margin-bottom: 40px;

    &__intro {
      padding: 0 20px;
      margin-bottom: 30px;

      p {
        color: $cursive-color;
        font-size: 1.1em;
        line-height: 1.6;
      }
    }

    &__list {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 40px;
    }

    &__info {
      padding: 20px;
      border: 2px solid $primary;
      background-color: $background;
      transition: all 0.45s ease;

      &-title {
        margin: 0 0 15px 0;
        padding: 0;
        color: $accent;
        font-size: 1.3em;
        text-transform: uppercase;
      }

      &-content {
        margin: 0;
        color: $cursive-color;
        line-height: 1.7;
        text-align: justify;
        text-justify: inter-word;
      }
    }
  }

  .feed-item {
    padding: 20px;
    border: 2px solid $primary;
    background-color: $background;
    transition: all 0.45s ease;

    &:hover {
      border-color: $accent;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    &__header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }

    &__icon {
      font-size: 2.5em;
      line-height: 1;
    }

    &__title {
      margin: 0;
      padding: 0;
      color: $text;
      font-size: 1.5em;
      font-weight: 400;
    }

    &__description {
      margin: 0 0 20px 0;
      padding: 0;
      color: $cursive-color;
      line-height: 1.7;
      text-align: justify;
      text-justify: inter-word;
    }

    &__link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background-color: $primary;
      color: $text;
      text-decoration: none;
      text-transform: uppercase;
      font-size: 0.9em;
      font-weight: 600;
      letter-spacing: 0.5px;
      transition: all 0.3s ease;
      border: 2px solid $primary;

      &:hover {
        background-color: $accent;
        border-color: $accent;
        color: $background;
      }

      &:focus {
        outline: 2px solid $accent;
        outline-offset: 2px;
      }
    }

    &__icon-rss {
      width: 14px;
      height: 14px;
    }
  }

  @media (max-width: 768px) {
    .feed-item {
      &__header {
        flex-direction: column;
        text-align: center;
        gap: 10px;
      }

      &__icon {
        font-size: 2em;
      }

      &__title {
        font-size: 1.3em;
      }
    }
  }
</style>
