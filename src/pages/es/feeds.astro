---
import { contact } from "@content/es/contact";
import Layout from "@layouts/Layout.astro";
import { t } from "@locales/index";

const lang = "es";
const pageTitle = t(lang, "feeds.title");
const pageDescription = t(lang, "feeds.description");

const feeds = [
  {
    title: t(lang, "feeds.general"),
    description: t(lang, "feeds.generalDescription"),
    url: "/rss.xml",
    icon: "ðŸ“°",
  },
  {
    title: t(lang, "feeds.books"),
    description: t(lang, "feeds.booksDescription"),
    url: "/es/libros/rss.xml",
    icon: "ðŸ“š",
  },
  {
    title: t(lang, "feeds.tutorials"),
    description: t(lang, "feeds.tutorialsDescription"),
    url: "/es/tutoriales/rss.xml",
    icon: "ðŸ’»",
  },
];
---

<Layout title={pageTitle} description={pageDescription} lang={lang} contact={contact} translationSlug="/en/feeds">
  <main class="main">
    <article class="article">
      <header class="article__header">
        <h1 class="article__title">{pageTitle}</h1>
        <p class="article__description">{pageDescription}</p>
      </header>

      <div class="feeds">
        {
          feeds.map((feed) => (
            <article class="feed-card">
              <div class="feed-card__icon" aria-hidden="true">
                {feed.icon}
              </div>
              <div class="feed-card__content">
                <h2 class="feed-card__title">{feed.title}</h2>
                <p class="feed-card__description">{feed.description}</p>
                <a
                  href={feed.url}
                  class="feed-card__link"
                  type="application/rss+xml"
                  aria-label={`${t(lang, "feeds.subscribeButton")} - ${feed.title}`}
                >
                  <svg
                    class="feed-card__icon-rss"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z" />
                  </svg>
                  {t(lang, "feeds.subscribeButton")}
                </a>
              </div>
            </article>
          ))
        }
      </div>

      <section class="info-box">
        <h2 class="info-box__title">{t(lang, "feeds.whatIsRss")}</h2>
        <p class="info-box__content">{t(lang, "feeds.whatIsRssDescription")}</p>
      </section>
    </article>
  </main>
</Layout>

<style lang="scss">
  .main {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .article {
    &__header {
      margin-bottom: 3rem;
      text-align: center;
    }

    &__title {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--color-text);
    }

    &__description {
      font-size: 1.125rem;
      color: var(--color-text-secondary);
      max-width: 600px;
      margin: 0 auto;
    }
  }

  .feeds {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-bottom: 3rem;
  }

  .feed-card {
    display: flex;
    gap: 1.5rem;
    padding: 1.5rem;
    background: var(--color-background-secondary);
    border-radius: 8px;
    border: 1px solid var(--color-border);
    transition: all 0.2s ease;

    &:hover {
      border-color: var(--color-primary);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    &__icon {
      font-size: 3rem;
      line-height: 1;
      flex-shrink: 0;
    }

    &__content {
      flex: 1;
    }

    &__title {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: var(--color-text);
    }

    &__description {
      color: var(--color-text-secondary);
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    &__link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--color-primary);
      color: white;
      text-decoration: none;
      border-radius: 4px;
      font-weight: 500;
      transition: all 0.2s ease;

      &:hover {
        background: var(--color-primary-dark);
        transform: translateY(-1px);
      }

      &:focus {
        outline: 2px solid var(--color-primary);
        outline-offset: 2px;
      }
    }

    &__icon-rss {
      width: 1rem;
      height: 1rem;
    }
  }

  .info-box {
    padding: 1.5rem;
    background: var(--color-background-tertiary);
    border-left: 4px solid var(--color-primary);
    border-radius: 4px;

    &__title {
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
      color: var(--color-text);
    }

    &__content {
      color: var(--color-text-secondary);
      line-height: 1.6;
      margin: 0;
    }
  }

  @media (max-width: 768px) {
    .article {
      &__title {
        font-size: 2rem;
      }
    }

    .feed-card {
      flex-direction: column;
      text-align: center;

      &__icon {
        font-size: 2.5rem;
      }
    }
  }
</style>
